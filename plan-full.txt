Acquiring state lock. This may take a few moments...
module.database.random_id.db_suffix: Refreshing state... [id=Fuh33g]
module.storage.random_id.storage_suffix: Refreshing state... [id=CXDBgw]
module.auth.random_password.nextauth_secret: Refreshing state... [id=none]
module.auth.data.azuread_service_principal.microsoft_graph: Reading...
module.auth.data.azuread_client_config.current: Reading...
module.auth.data.azuread_client_config.current: Read complete after 0s [id=d22686a0-c1be-48e0-8f91-5bdd033f7dad-04b07795-8ddb-461a-bbee-02f9e1bf7b46-d31f8f5c-9982-4912-a1f9-f59c21562d6d]
module.auth.data.azuread_service_principal.microsoft_graph: Read complete after 1s [id=3ac84a4b-debe-4f48-af2a-864dfe1c647b]
module.identity.data.azurerm_client_config.current: Reading...
data.azurerm_resource_group.rg: Reading...
module.identity.data.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9ZDMxZjhmNWMtOTk4Mi00OTEyLWExZjktZjU5YzIxNTYyZDZkO3N1YnNjcmlwdGlvbklkPTU5ZDM1MDEyLWI1OTMtNGIyZi1iZDUwLTI4ZTY2NmVkMTJmNzt0ZW5hbnRJZD1kMjI2ODZhMC1jMWJlLTQ4ZTAtOGY5MS01YmRkMDMzZjdkYWQ=]
data.azurerm_resource_group.rg: Read complete after 0s [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate]
module.identity.azurerm_user_assigned_identity.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ManagedIdentity/userAssignedIdentities/reportmate-identity]
module.networking[0].azurerm_cdn_frontdoor_profile.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor]
module.containers.azurerm_container_registry.acr[0]: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ContainerRegistry/registries/reportmateacr]
module.database.azurerm_postgresql_flexible_server.pg: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database]
module.monitoring.azurerm_log_analytics_workspace.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.OperationalInsights/workspaces/reportmate-logs]
module.messaging.azurerm_web_pubsub.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.SignalRService/webPubSub/reportmate-signalr]
module.storage.azurerm_storage_account.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Storage/storageAccounts/reportmatestorage]
module.database.azurerm_postgresql_flexible_server_database.db: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database/databases/reportmate]
module.database.azurerm_postgresql_flexible_server_firewall_rule.azure_services: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database/firewallRules/allow_azure]
module.database.azurerm_postgresql_flexible_server_firewall_rule.public_access[0]: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database/firewallRules/allow_all]
module.networking[0].azurerm_cdn_frontdoor_endpoint.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/afdEndpoints/reportmate-endpoint]
module.networking[0].azurerm_cdn_frontdoor_origin_group.api: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-api-origin-group]
module.networking[0].azurerm_cdn_frontdoor_rule_set.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/ruleSets/HeaderForwardingRules]
module.networking[0].azurerm_cdn_frontdoor_origin_group.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-origin-group]
module.networking[0].azurerm_cdn_frontdoor_custom_domain.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/customDomains/reportmate-custom-domain]
module.monitoring.azurerm_application_insights.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Insights/components/reportmate-app-insights]
module.containers.azurerm_container_app_environment.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/managedEnvironments/reportmate-env]
module.containers.azurerm_role_assignment.container_acr_pull[0]: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ContainerRegistry/registries/reportmateacr/providers/Microsoft.Authorization/roleAssignments/3458a1bd-fc7d-49c8-97b9-0d61644687fe]
module.containers.azurerm_container_app.api_functions: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/containerApps/reportmate-functions-api]
module.storage.azurerm_storage_queue.ingest: Refreshing state... [id=https://reportmatestorage.queue.core.windows.net/osquery-ingest]
module.networking[0].azurerm_cdn_frontdoor_origin.api: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-api-origin-group/origins/reportmate-api-origin]
module.key_vault[0].azurerm_key_vault.reportmate: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.KeyVault/vaults/reportmate-kv]
module.key_vault[0].azurerm_role_assignment.devops_group[0]: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.KeyVault/vaults/reportmate-kv/providers/Microsoft.Authorization/roleAssignments/67a2785c-24d6-85ec-e2c6-82e0deafd6d1]
module.auth.azurerm_key_vault_secret.app_tenant_id[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/auth-tenant-id/fc09b180ada441a1965d30cc035b96b6]
module.auth.time_sleep.wait_for_rbac[0]: Refreshing state... [id=2025-08-18T07:03:18Z]
module.key_vault[0].azurerm_key_vault_secret.azure_ad_tenant_id: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/azure-ad-tenant-id/ef092c84116f4237bf6c22b9f38f2573]
module.key_vault[0].azurerm_key_vault_secret.app_insights_connection_string[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/appinsights-connection-string/8c2ae14a734445d68fe1416a575358cd]
module.key_vault[0].azurerm_key_vault_secret.db_username: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/db-username/400466bbff774512acf26913c1e3d17b]
module.key_vault[0].azurerm_key_vault_secret.devops_group_object_id: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/devops-group-object-id/78ee35936bf740fa816d2ff6da7649fa]
module.key_vault[0].azurerm_key_vault_secret.custom_domain_name: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/custom-domain-name/fe5600dc3eb747be80bb873852d25b93]
module.key_vault[0].azurerm_key_vault_secret.postgres_server_name: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/postgres-server-name/96db1c8bfeb14e17857417864a8895dc]
module.key_vault[0].azurerm_key_vault_secret.client_passphrase: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/client-passphrase/1872d9ef4b0349888d6c2687d0e8f715]
module.containers.azurerm_container_app.frontend_prod_main[0]: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/containerApps/reportmate-web-app-prod]
module.key_vault[0].azurerm_key_vault_secret.azure_ad_client_id: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/azure-ad-client-id/5054b768b7464db6bd74a97ce645e8ea]
module.key_vault[0].azurerm_key_vault_secret.storage_connection_string[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/storage-connection-string/1680f9ae19f7489895f1def745f147a0]
module.key_vault[0].azurerm_key_vault_secret.db_password: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/db-password/f3098a51d22a464b991b73acdac084c5]
module.key_vault[0].azurerm_key_vault_secret.db_name: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/db-name/a4c1854f38a64ca28af512021ae276ec]
module.key_vault[0].azurerm_key_vault_secret.web_pubsub_connection_string[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/webpubsub-connection-string/f1245990561b4541be13b331f4adcc97]
module.auth.azurerm_key_vault_secret.nextauth_secret[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/nextauth-secret/6f1f129c8d2a4d91981bbcf7e5f744d6]
module.networking[0].azurerm_cdn_frontdoor_origin.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-origin-group/origins/reportmate-origin]
module.auth.azuread_application.reportmate_web: Refreshing state... [id=/applications/6dae733c-acb9-4374-bf1b-97122fa11187]
module.networking[0].azurerm_cdn_frontdoor_route.main: Refreshing state... [id=/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/afdEndpoints/reportmate-endpoint/routes/reportmate-route]
module.auth.azurerm_key_vault_secret.app_client_id[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/auth-client-id/262be83a094d47e390fbe8d287b72556]
module.auth.azuread_service_principal.reportmate_web: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e]
module.auth.azurerm_key_vault_secret.app_client_secret[0]: Refreshing state... [id=https://reportmate-kv.vault.azure.net/secrets/auth-client-secret/9beabe52b0a14f7a8a39bf6a6fe39815]
module.auth.azuread_app_role_assignment.authorized_groups[2]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/x33CpUrP7kigi-pNxdn7w75-6VzipQpHjywIqw5yzps]
module.auth.azuread_app_role_assignment.authorized_groups[1]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/0-CJDfRU8k-GGceFBmpdUl3DWF3skARMtfHjm5BSiqE]
module.auth.azuread_app_role_assignment.authorized_groups[0]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/B2Cs9Fn4rU2Z1zjc6e7ELcJlblrk5XBDgIVerwE2JbY]
module.auth.azuread_app_role_assignment.authorized_groups[3]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/3Tb5WLzq6EWajJkp9i3mTjc0LashRMRJhEbOuZL-rfU]
module.auth.azuread_app_role_assignment.authorized_groups[4]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/zo2y-9r0OkyCbG56QS2Fn3LQazn3edRHkU5sUdG6FTA]
module.auth.azuread_app_role_assignment.authorized_groups[5]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/4Rk3jh586EOd0a9l_UVgIMNzQhcbhyxEoqKoPqW9mvg]
module.auth.azuread_app_role_assignment.authorized_groups[6]: Refreshing state... [id=a13786ed-9def-44ab-a454-2c00b61f8d9e/appRoleAssignment/NeNbvRWdJUCk2iinoOSSTOkxpsqyw4NHvuT0ONBJmWo]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
 <= read (data resources)

Terraform will perform the following actions:

  # module.auth.azuread_application_password.reportmate_web will be created
  + resource "azuread_application_password" "reportmate_web" {
      + application_id        = "/applications/6dae733c-acb9-4374-bf1b-97122fa11187"
      + application_object_id = (known after apply)
      + display_name          = "ReportMate Web App Secret"
      + end_date              = "2026-12-31T23:59:59Z"
      + id                    = (known after apply)
      + key_id                = (known after apply)
      + start_date            = (known after apply)
      + value                 = (sensitive value)
    }

  # module.auth.azuread_service_principal.reportmate_web will be updated in-place
  ~ resource "azuread_service_principal" "reportmate_web" {
        id                            = "a13786ed-9def-44ab-a454-2c00b61f8d9e"
      ~ owners                        = [
          - "9b40df31-e927-454a-9c6e-834f0f84b172",
          + "d31f8f5c-9982-4912-a1f9-f59c21562d6d",
        ]
      ~ tags                          = [
            "Authentication",
          - "Environment:prod",
            "ReportMate",
        ]
        # (24 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.auth.azurerm_key_vault_secret.app_client_id[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "app_client_id" {
        id                      = "https://reportmate-kv.vault.azure.net/secrets/auth-client-id/262be83a094d47e390fbe8d287b72556"
        name                    = "auth-client-id"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          - "file-encoding" = "utf-8" -> null
        }
      ~ value                   = (sensitive value)
        # (10 unchanged attributes hidden)
    }

  # module.auth.azurerm_key_vault_secret.app_client_secret[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "app_client_secret" {
        id                      = "https://reportmate-kv.vault.azure.net/secrets/auth-client-secret/9beabe52b0a14f7a8a39bf6a6fe39815"
        name                    = "auth-client-secret"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          - "file-encoding" = "utf-8" -> null
        }
      ~ value                   = (sensitive value)
        # (10 unchanged attributes hidden)
    }

  # module.auth.azurerm_key_vault_secret.app_tenant_id[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "app_tenant_id" {
        id                      = "https://reportmate-kv.vault.azure.net/secrets/auth-tenant-id/fc09b180ada441a1965d30cc035b96b6"
        name                    = "auth-tenant-id"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          - "file-encoding" = "utf-8" -> null
        }
        # (11 unchanged attributes hidden)
    }

  # module.auth.azurerm_key_vault_secret.nextauth_secret[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "nextauth_secret" {
        id                      = "https://reportmate-kv.vault.azure.net/secrets/nextauth-secret/6f1f129c8d2a4d91981bbcf7e5f744d6"
        name                    = "nextauth-secret"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          - "file-encoding" = "utf-8" -> null
        }
      ~ value                   = (sensitive value)
        # (10 unchanged attributes hidden)
    }

  # module.auth.null_resource.update_identifier_uris will be created
  + resource "null_resource" "update_identifier_uris" {
      + id = (known after apply)
    }

  # module.auth.random_password.app_secret will be created
  + resource "random_password" "app_secret" {
      + bcrypt_hash = (sensitive value)
      + id          = (known after apply)
      + length      = 32
      + lower       = true
      + min_lower   = 0
      + min_numeric = 0
      + min_special = 0
      + min_upper   = 0
      + number      = true
      + numeric     = true
      + result      = (sensitive value)
      + special     = true
      + upper       = true
    }

  # module.containers.azurerm_container_app.api_functions will be updated in-place
  ~ resource "azurerm_container_app" "api_functions" {
        id                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/containerApps/reportmate-functions-api"
        name                          = "reportmate-functions-api"
      ~ tags                          = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
            "Purpose"     = "API"
        }
        # (10 unchanged attributes hidden)

      ~ ingress {
            # (8 unchanged attributes hidden)

          ~ cors {
              ~ allowed_origins           = [
                    "https://reportmate-web-app-prod.blackdune-79551938.canadacentral.azurecontainerapps.io",
                  - "https://reportmate.ecuad.ca",
                ]
                # (5 unchanged attributes hidden)
            }

            # (1 unchanged block hidden)
        }

      - secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }
      - secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }
      + secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }

      ~ template {
            # (6 unchanged attributes hidden)

          ~ container {
              ~ image             = "reportmateacr.azurecr.io/reportmate-api:device-id-fix-20251204114031-4ae13e3" -> "reportmateacr.azurecr.io/reportmate-api:latest"
                name              = "api"
                # (5 unchanged attributes hidden)

              ~ env {
                    name        = "APPLICATIONINSIGHTS_CONNECTION_STRING"
                  # Warning: this attribute value will be marked as sensitive and will not
                  # display in UI output after applying this change. The value is unchanged.
                  ~ value       = (sensitive value)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                    name        = "EVENTS_CONNECTION"
                  # Warning: this attribute value will be marked as sensitive and will not
                  # display in UI output after applying this change. The value is unchanged.
                  ~ value       = (sensitive value)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "ENVIRONMENT" -> "REPORTMATE_PASSPHRASE"
                  # Warning: this attribute value will be marked as sensitive and will not
                  # display in UI output after applying this change.
                  ~ value       = (sensitive value)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "REPORTMATE_PASSPHRASE" -> "ENVIRONMENT"
                  ~ value       = "XmZ8Kp3NwQ7YtR9vC2LzH6FgDj4BlMnE" -> "production"
                    # (1 unchanged attribute hidden)
                }

                # (2 unchanged blocks hidden)
            }
        }

        # (2 unchanged blocks hidden)
    }

  # module.containers.azurerm_container_app.frontend_prod_main[0] will be updated in-place
  ~ resource "azurerm_container_app" "frontend_prod_main" {
        id                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/containerApps/reportmate-web-app-prod"
        name                          = "reportmate-web-app-prod"
      ~ tags                          = {
            "Environment" = "production"
          ~ "LastUpdated" = "2025-09-18" -> "2025-11-29"
            "ManagedBy"   = "Terraform"
            "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (10 unchanged attributes hidden)

      + registry {
          + identity = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ManagedIdentity/userAssignedIdentities/reportmate-identity"
          + server   = "reportmateacr.azurecr.io"
        }

      - secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }
      - secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }
      + secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }
      + secret {
          # At least one attribute in this block is (or was) sensitive,
          # so its contents will not be displayed.
        }

      ~ template {
            # (6 unchanged attributes hidden)

          ~ container {
              ~ image             = "reportmateacr.azurecr.io/reportmate:20251206205144-1e6728d" -> "reportmateacr.azurecr.io/reportmate:latest"
                name              = "container"
                # (5 unchanged attributes hidden)

              ~ env {
                    name        = "DATABASE_URL"
                  # Warning: this attribute value will be marked as sensitive and will not
                  # display in UI output after applying this change. The value is unchanged.
                  ~ value       = (sensitive value)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "PORT" -> "NEXT_PUBLIC_API_BASE_URL"
                  ~ value       = "3000" -> "https://reportmate-functions-api.blackdune-79551938.canadacentral.azurecontainerapps.io"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "HOSTNAME" -> "PORT"
                  ~ value       = "0.0.0.0" -> "3000"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "HOST" -> "HOSTNAME"
                  ~ value       = "reportmate.ecuad.ca" -> "0.0.0.0"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXT_PUBLIC_SITE_URL" -> "HOST"
                  ~ value       = "https://reportmate.ecuad.ca" -> "reportmate.ecuad.ca"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXT_PUBLIC_URL" -> "NEXT_PUBLIC_SITE_URL"
                    # (2 unchanged attributes hidden)
                }
              ~ env {
                  ~ name        = "NEXTAUTH_SECRET" -> "NEXT_PUBLIC_URL"
                  - secret_name = "reportmate-nextauth-secret" -> null
                  + value       = "https://reportmate.ecuad.ca"
                }
              ~ env {
                  ~ name        = "AZURE_AD_CLIENT_SECRET" -> "NEXTAUTH_SECRET"
                  ~ secret_name = "reportmate-auth-client-secret" -> "nextauth-secret"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "AZURE_AD_CLIENT_ID" -> "AZURE_AD_CLIENT_SECRET"
                  + secret_name = "auth-client-secret"
                  - value       = "8e809e42-7949-45e0-bca6-57e34e3a4139" -> null
                }
              ~ env {
                  ~ name        = "AZURE_AD_TENANT_ID" -> "AZURE_AD_CLIENT_ID"
                  ~ value       = "d22686a0-c1be-48e0-8f91-5bdd033f7dad" -> "8e809e42-7949-45e0-bca6-57e34e3a4139"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "AUTH_PROVIDERS" -> "AZURE_AD_TENANT_ID"
                  ~ value       = "azure-ad" -> "d22686a0-c1be-48e0-8f91-5bdd033f7dad"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "DEFAULT_AUTH_PROVIDER" -> "AUTH_PROVIDERS"
                    # (2 unchanged attributes hidden)
                }
              ~ env {
                  ~ name        = "ALLOWED_DOMAINS" -> "DEFAULT_AUTH_PROVIDER"
                  ~ value       = "ecuad.ca" -> "azure-ad"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "REQUIRE_EMAIL_VERIFICATION" -> "ALLOWED_DOMAINS"
                  ~ value       = "false" -> "ecuad.ca"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXTAUTH_URL" -> "REQUIRE_EMAIL_VERIFICATION"
                  ~ value       = "https://reportmate.ecuad.ca" -> "false"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXTAUTH_URL_INTERNAL" -> "NEXTAUTH_URL"
                    # (2 unchanged attributes hidden)
                }
              ~ env {
                  ~ name        = "AUTH_TRUST_HOST" -> "NEXTAUTH_URL_INTERNAL"
                  ~ value       = "true" -> "https://reportmate.ecuad.ca"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXTAUTH_SECRET" -> "AUTH_TRUST_HOST"
                  - secret_name = "reportmate-nextauth-secret" -> null
                  + value       = "true"
                }
              ~ env {
                  ~ name        = "VERCEL_URL" -> "NEXTAUTH_SECRET"
                  + secret_name = "nextauth-secret"
                  - value       = "reportmate.ecuad.ca" -> null
                }
              ~ env {
                  ~ name        = "NEXT_PUBLIC_VERCEL_URL" -> "VERCEL_URL"
                    # (2 unchanged attributes hidden)
                }
              ~ env {
                  ~ name        = "REPORTMATE_PASSPHRASE" -> "NEXT_PUBLIC_VERCEL_URL"
                  ~ value       = "XmZ8Kp3NwQ7YtR9vC2LzH6FgDj4BlMnE" -> "reportmate.ecuad.ca"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXT_PUBLIC_AUTO_SSO" -> "REPORTMATE_PASSPHRASE"
                  # Warning: this attribute value will be marked as sensitive and will not
                  # display in UI output after applying this change.
                  ~ value       = (sensitive value)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "CONTAINER_IMAGE_TAG" -> "NEXT_PUBLIC_AUTO_SSO"
                  ~ value       = "20251206205144-1e6728d" -> "false"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "BUILD_TIME" -> "CONTAINER_IMAGE_TAG"
                  ~ value       = "2025-12-07T04:51:44.712Z" -> "latest"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "BUILD_ID" -> "BUILD_TIME"
                  ~ value       = "1e6728d" -> (known after apply)
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                  ~ name        = "NEXT_PUBLIC_API_BASE_URL" -> "BUILD_ID"
                  ~ value       = "https://reportmate-functions-api.blackdune-79551938.canadacentral.azurecontainerapps.io" -> "t"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                    name        = "NEXT_PUBLIC_VERSION"
                  ~ value       = "20251206205144-1e6728d" -> "latest"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                    name        = "NEXT_PUBLIC_BUILD_ID"
                  ~ value       = "1e6728d" -> "t"
                    # (1 unchanged attribute hidden)
                }
              ~ env {
                    name        = "NEXT_PUBLIC_BUILD_TIME"
                  ~ value       = "2025-12-07T04:51:44.712Z" -> (known after apply)
                    # (1 unchanged attribute hidden)
                }

                # (8 unchanged blocks hidden)
            }
        }

        # (3 unchanged blocks hidden)
    }

  # module.containers.azurerm_container_app_environment.main will be updated in-place
  ~ resource "azurerm_container_app_environment" "main" {
        id                                          = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.App/managedEnvironments/reportmate-env"
        name                                        = "reportmate-env"
      ~ tags                                        = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (17 unchanged attributes hidden)
    }

  # module.containers.azurerm_container_registry.acr[0] will be updated in-place
  ~ resource "azurerm_container_registry" "acr" {
        id                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ContainerRegistry/registries/reportmateacr"
        name                          = "reportmateacr"
      ~ tags                          = {
            "Environment" = "production"
          - "GitOps"      = "Terraformed" -> null
          + "LastUpdated" = "2025-11-29"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
          + "Project"     = "ReportMate"
          - "Service"     = "reportmate" -> null
        }
        # (19 unchanged attributes hidden)
    }

  # module.containers.azurerm_role_assignment.container_acr_push[0] will be created
  + resource "azurerm_role_assignment" "container_acr_push" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "f0f22ee0-6b50-42f5-8446-c8f749279e41"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AcrPush"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ContainerRegistry/registries/reportmateacr"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.containers.random_id.container_suffix will be created
  + resource "random_id" "container_suffix" {
      + b64_std     = (known after apply)
      + b64_url     = (known after apply)
      + byte_length = 4
      + dec         = (known after apply)
      + hex         = (known after apply)
      + id          = (known after apply)
    }

  # module.database.azurerm_postgresql_flexible_server.pg will be updated in-place
  ~ resource "azurerm_postgresql_flexible_server" "pg" {
      ~ administrator_password            = (sensitive value)
        id                                = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database"
        name                              = "reportmate-database"
      ~ tags                              = {
            "Environment" = "production"
          ~ "LastUpdated" = "2025-09-18" -> "2025-11-29"
            "ManagedBy"   = "Terraform"
            "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (20 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # module.database.null_resource.database_init_api will be created
  + resource "null_resource" "database_init_api" {
      + id       = (known after apply)
      + triggers = {
          + "database_id" = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.DBforPostgreSQL/flexibleServers/reportmate-database/databases/reportmate"
          + "run_once"    = "initial_setup"
        }
    }

  # module.identity.azurerm_role_assignment.monitoring_contributor will be created
  + resource "azurerm_role_assignment" "monitoring_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "f0f22ee0-6b50-42f5-8446-c8f749279e41"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Monitoring Contributor"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Insights/components/reportmate-app-insights"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.identity.azurerm_role_assignment.storage_blob_contributor will be created
  + resource "azurerm_role_assignment" "storage_blob_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "f0f22ee0-6b50-42f5-8446-c8f749279e41"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage Blob Data Contributor"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Storage/storageAccounts/reportmatestorage"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.identity.azurerm_role_assignment.storage_queue_contributor will be created
  + resource "azurerm_role_assignment" "storage_queue_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "f0f22ee0-6b50-42f5-8446-c8f749279e41"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage Queue Data Contributor"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Storage/storageAccounts/reportmatestorage"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.identity.azurerm_role_assignment.web_pubsub_service_owner will be created
  + resource "azurerm_role_assignment" "web_pubsub_service_owner" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "f0f22ee0-6b50-42f5-8446-c8f749279e41"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Web PubSub Service Owner"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.SignalRService/webPubSub/reportmate-signalr"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.identity.azurerm_user_assigned_identity.main will be updated in-place
  ~ resource "azurerm_user_assigned_identity" "main" {
        id                  = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.ManagedIdentity/userAssignedIdentities/reportmate-identity"
        name                = "reportmate-identity"
      ~ tags                = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (5 unchanged attributes hidden)
    }

  # module.identity.random_id.identity_suffix will be created
  + resource "random_id" "identity_suffix" {
      + b64_std     = (known after apply)
      + b64_url     = (known after apply)
      + byte_length = 4
      + dec         = (known after apply)
      + hex         = (known after apply)
      + id          = (known after apply)
    }

  # module.key_vault[0].data.azurerm_client_config.current will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_client_config" "current" {
      + client_id       = (known after apply)
      + id              = (known after apply)
      + object_id       = (known after apply)
      + subscription_id = (known after apply)
      + tenant_id       = (known after apply)
    }

  # module.key_vault[0].azurerm_key_vault.reportmate will be updated in-place
  ~ resource "azurerm_key_vault" "reportmate" {
        id                              = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.KeyVault/vaults/reportmate-kv"
        name                            = "reportmate-kv"
      ~ tags                            = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
      ~ tenant_id                       = "d22686a0-c1be-48e0-8f91-5bdd033f7dad" -> (known after apply)
        # (13 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.app_insights_connection_string[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "app_insights_connection_string" {
      + content_type            = "Application Insights connection string for monitoring"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/appinsights-connection-string/8c2ae14a734445d68fe1416a575358cd"
        name                    = "appinsights-connection-string"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Monitoring"
          + "Type"          = "ConnectionString"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.azure_ad_client_id will be updated in-place
  ~ resource "azurerm_key_vault_secret" "azure_ad_client_id" {
      + content_type            = "Azure AD application client ID"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/azure-ad-client-id/5054b768b7464db6bd74a97ce645e8ea"
        name                    = "azure-ad-client-id"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Azure AD Authentication"
          + "Type"          = "ClientID"
          - "file-encoding" = "utf-8" -> null
        }
      ~ value                   = (sensitive value)
        # (9 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.azure_ad_tenant_id will be updated in-place
  ~ resource "azurerm_key_vault_secret" "azure_ad_tenant_id" {
      + content_type            = "Azure AD tenant ID"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/azure-ad-tenant-id/ef092c84116f4237bf6c22b9f38f2573"
        name                    = "azure-ad-tenant-id"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Azure AD Authentication"
          + "Type"          = "TenantID"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.client_passphrase will be updated in-place
  ~ resource "azurerm_key_vault_secret" "client_passphrase" {
      + content_type            = "Client authentication passphrase for Windows agents"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/client-passphrase/1872d9ef4b0349888d6c2687d0e8f715"
        name                    = "client-passphrase"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Client Authentication"
          + "Type"          = "Passphrase"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.custom_domain_name will be updated in-place
  ~ resource "azurerm_key_vault_secret" "custom_domain_name" {
      + content_type            = "Custom domain name for ReportMate frontend"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/custom-domain-name/fe5600dc3eb747be80bb873852d25b93"
        name                    = "custom-domain-name"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Domain Configuration"
          + "Type"          = "DomainName"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.db_name will be updated in-place
  ~ resource "azurerm_key_vault_secret" "db_name" {
      + content_type            = "PostgreSQL database name"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/db-name/a4c1854f38a64ca28af512021ae276ec"
        name                    = "db-name"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Database Configuration"
          + "Type"          = "DatabaseName"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.db_password will be updated in-place
  ~ resource "azurerm_key_vault_secret" "db_password" {
      + content_type            = "PostgreSQL database password for reportmate user"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/db-password/f3098a51d22a464b991b73acdac084c5"
        name                    = "db-password"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Database Authentication"
          + "Type"          = "Password"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.db_username will be updated in-place
  ~ resource "azurerm_key_vault_secret" "db_username" {
      + content_type            = "PostgreSQL database username"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/db-username/400466bbff774512acf26913c1e3d17b"
        name                    = "db-username"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Database Configuration"
          + "Type"          = "Username"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.devops_group_object_id will be updated in-place
  ~ resource "azurerm_key_vault_secret" "devops_group_object_id" {
      + content_type            = "DevOps Resource InfraSec group object ID for access control"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/devops-group-object-id/78ee35936bf740fa816d2ff6da7649fa"
        name                    = "devops-group-object-id"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Access Control"
          + "Type"          = "GroupObjectID"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.nextauth_secret will be created
  + resource "azurerm_key_vault_secret" "nextauth_secret" {
      + content_type            = "NextAuth session encryption secret"
      + id                      = (known after apply)
      + key_vault_id            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.KeyVault/vaults/reportmate-kv"
      + name                    = "nextauth-secret"
      + resource_id             = (known after apply)
      + resource_versionless_id = (known after apply)
      + tags                    = {
          + "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
          + "Project"     = "ReportMate"
          + "Purpose"     = "Web Authentication"
          + "Type"        = "Secret"
        }
      + value                   = (sensitive value)
      + value_wo                = (write-only attribute)
      + version                 = (known after apply)
      + versionless_id          = (known after apply)
    }

  # module.key_vault[0].azurerm_key_vault_secret.postgres_server_name will be updated in-place
  ~ resource "azurerm_key_vault_secret" "postgres_server_name" {
      + content_type            = "PostgreSQL server name"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/postgres-server-name/96db1c8bfeb14e17857417864a8895dc"
        name                    = "postgres-server-name"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Database Configuration"
          + "Type"          = "ServerName"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.storage_connection_string[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "storage_connection_string" {
      + content_type            = "Azure Storage Account connection string"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/storage-connection-string/1680f9ae19f7489895f1def745f147a0"
        name                    = "storage-connection-string"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Azure Storage"
          + "Type"          = "ConnectionString"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_key_vault_secret.web_pubsub_connection_string[0] will be updated in-place
  ~ resource "azurerm_key_vault_secret" "web_pubsub_connection_string" {
      + content_type            = "Azure Web PubSub connection string for real-time events"
        id                      = "https://reportmate-kv.vault.azure.net/secrets/webpubsub-connection-string/f1245990561b4541be13b331f4adcc97"
        name                    = "webpubsub-connection-string"
      ~ tags                    = {
          + "Environment"   = "production"
          + "LastUpdated"   = "2025-11-29"
          + "ManagedBy"     = "Terraform"
          + "Owner"         = "ECUAD-IT"
          + "Project"       = "ReportMate"
          + "Purpose"       = "Real-time Messaging"
          + "Type"          = "ConnectionString"
          - "file-encoding" = "utf-8" -> null
        }
        # (10 unchanged attributes hidden)
    }

  # module.key_vault[0].azurerm_role_assignment.current_user will be created
  + resource "azurerm_role_assignment" "current_user" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = (known after apply)
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Key Vault Administrator"
      + scope                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.KeyVault/vaults/reportmate-kv"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.key_vault[0].random_password.nextauth_secret will be created
  + resource "random_password" "nextauth_secret" {
      + bcrypt_hash = (sensitive value)
      + id          = (known after apply)
      + length      = 32
      + lower       = true
      + min_lower   = 0
      + min_numeric = 0
      + min_special = 0
      + min_upper   = 0
      + number      = true
      + numeric     = true
      + result      = (sensitive value)
      + special     = true
      + upper       = true
    }

  # module.messaging.azurerm_web_pubsub.main will be updated in-place
  ~ resource "azurerm_web_pubsub" "main" {
        id                            = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.SignalRService/webPubSub/reportmate-signalr"
        name                          = "reportmate-signalr"
      ~ tags                          = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (17 unchanged attributes hidden)
    }

  # module.messaging.random_id.pubsub_suffix will be created
  + resource "random_id" "pubsub_suffix" {
      + b64_std     = (known after apply)
      + b64_url     = (known after apply)
      + byte_length = 4
      + dec         = (known after apply)
      + hex         = (known after apply)
      + id          = (known after apply)
    }

  # module.monitoring.azurerm_application_insights.main will be updated in-place
  ~ resource "azurerm_application_insights" "main" {
        id                                    = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Insights/components/reportmate-app-insights"
        name                                  = "reportmate-app-insights"
      ~ tags                                  = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (16 unchanged attributes hidden)
    }

  # module.monitoring.azurerm_log_analytics_workspace.main will be updated in-place
  ~ resource "azurerm_log_analytics_workspace" "main" {
        id                                      = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.OperationalInsights/workspaces/reportmate-logs"
        name                                    = "reportmate-logs"
      ~ tags                                    = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (16 unchanged attributes hidden)
    }

  # module.monitoring.random_id.monitor_suffix will be created
  + resource "random_id" "monitor_suffix" {
      + b64_std     = (known after apply)
      + b64_url     = (known after apply)
      + byte_length = 4
      + dec         = (known after apply)
      + hex         = (known after apply)
      + id          = (known after apply)
    }

  # module.networking[0].azurerm_cdn_frontdoor_endpoint.main will be updated in-place
  ~ resource "azurerm_cdn_frontdoor_endpoint" "main" {
        id                       = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/afdEndpoints/reportmate-endpoint"
        name                     = "reportmate-endpoint"
      ~ tags                     = {
            "Environment" = "production"
          ~ "LastUpdated" = "2025-09-18" -> "2025-11-29"
            "ManagedBy"   = "Terraform"
            "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (3 unchanged attributes hidden)
    }

  # module.networking[0].azurerm_cdn_frontdoor_profile.main will be updated in-place
  ~ resource "azurerm_cdn_frontdoor_profile" "main" {
        id                       = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor"
        name                     = "reportmate-frontdoor"
      ~ tags                     = {
            "Environment" = "production"
          ~ "LastUpdated" = "2025-09-18" -> "2025-11-29"
            "ManagedBy"   = "Terraform"
            "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (4 unchanged attributes hidden)
    }

  # module.networking[0].azurerm_cdn_frontdoor_route.api will be created
  + resource "azurerm_cdn_frontdoor_route" "api" {
      + cdn_frontdoor_custom_domain_ids = [
          + "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/customDomains/reportmate-custom-domain",
        ]
      + cdn_frontdoor_endpoint_id       = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/afdEndpoints/reportmate-endpoint"
      + cdn_frontdoor_origin_group_id   = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-api-origin-group"
      + cdn_frontdoor_origin_ids        = [
          + "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-api-origin-group/origins/reportmate-api-origin",
        ]
      + enabled                         = true
      + forwarding_protocol             = "HttpsOnly"
      + https_redirect_enabled          = true
      + id                              = (known after apply)
      + link_to_default_domain          = true
      + name                            = "reportmate-api-route"
      + patterns_to_match               = [
          + "/api/*",
        ]
      + supported_protocols             = [
          + "Http",
          + "Https",
        ]
    }

  # module.networking[0].azurerm_cdn_frontdoor_route.main will be updated in-place
  ~ resource "azurerm_cdn_frontdoor_route" "main" {
      + cdn_frontdoor_origin_ids        = [
          + "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/originGroups/reportmate-origin-group/origins/reportmate-origin",
        ]
        id                              = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Cdn/profiles/reportmate-frontdoor/afdEndpoints/reportmate-endpoint/routes/reportmate-route"
        name                            = "reportmate-route"
        # (11 unchanged attributes hidden)
    }

  # module.storage.azurerm_storage_account.main will be updated in-place
  ~ resource "azurerm_storage_account" "main" {
        id                                 = "/subscriptions/59d35012-b593-4b2f-bd50-28e666ed12f7/resourceGroups/ReportMate/providers/Microsoft.Storage/storageAccounts/reportmatestorage"
        name                               = "reportmatestorage"
      ~ tags                               = {
            "Environment" = "production"
          + "LastUpdated" = "2025-11-29"
            "ManagedBy"   = "Terraform"
          + "Owner"       = "ECUAD-IT"
            "Project"     = "ReportMate"
        }
        # (97 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

Plan: 17 to add, 31 to change, 0 to destroy.

Warning: Argument is deprecated

  with module.storage.azurerm_storage_queue.ingest,
  on modules\storage\main.tf line 20, in resource "azurerm_storage_queue" "ingest":
  20:   storage_account_name = azurerm_storage_account.main.name

the `storage_account_name` property has been deprecated in favour of
`storage_account_id` and will be removed in version 5.0 of the Provider.



Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.
Releasing state lock. This may take a few moments...
