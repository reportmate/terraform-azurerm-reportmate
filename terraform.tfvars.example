# =================================================================
# ReportMate Infrastructure Configuration Example
# Copy this file to terraform.tfvars and customize for your deployment
# =================================================================

# =================================================================
# REQUIRED VARIABLES - Must be provided
# =================================================================

# Azure Configuration
resource_group_name = "my-reportmate-rg"
location           = "East US"

# Database Configuration
# SECURITY: Use a strong password for production deployments
db_password = "your-secure-database-password-here"

# =================================================================
# OPTIONAL VARIABLES - Customize as needed
# =================================================================

# Database Settings
db_username = "reportmate_admin"
db_name     = "reportmate"

# Environment Configuration
environment = "prod"
deploy_dev  = false
deploy_prod = true

# Custom Domain Configuration (optional)
# Set to true and provide domain name to enable custom domain
enable_custom_domain = false
custom_domain_name   = ""  # e.g., "reportmate.yourdomain.com"

# Container Configuration
# Uses the official ReportMate web application container from GitHub Container Registry
# This provides the complete Next.js frontend out of the box
container_image = "ghcr.io/reportmate/reportmate-app-web:latest"

# Alternative: Use Azure Container Registry (requires building your own image)
# container_registry_name = "mycompanyacr"
# use_custom_registry = true
# container_image = "mycompanyacr.azurecr.io/reportmate-web:latest"

# Client Authentication (optional)
# Leave empty for open access, or provide comma-separated passphrases
client_passphrases    = ""
enable_machine_groups = true
enable_business_units = true

# Pipeline Configuration (for CI/CD)
enable_pipeline_permissions   = false
pipeline_service_principal_id = ""

# =================================================================
# AUTHENTICATION CONFIGURATION
# =================================================================

# Azure AD Authentication
auth_sign_in_audience = "AzureADMyOrg"  # Only your organization
auth_providers        = ["azure-ad"]
default_auth_provider = "azure-ad"

# Security Settings
allowed_auth_domains        = ["ecuad.ca"]  # Replace with your domain(s)
require_email_verification  = false
auth_client_secret_expiry   = "2026-12-31T23:59:59Z"  # 2 years from now

# Secret Storage
enable_key_vault = true
key_vault_name   = "reportmate-kv-prod"  # Must be globally unique

# App Ownership and Authorization
app_owners = ["your-email@yourdomain.com"]  # Replace with actual owner emails
authorized_groups = ["your-azure-ad-group-id"]  # Replace with actual Azure AD group IDs

# =================================================================
# MULTI-ENVIRONMENT EXAMPLE
# =================================================================

# For development environment, you might want:
# auth_sign_in_audience = "AzureADMyOrg"
# auth_providers = ["azure-ad", "credentials"]  # Enable local auth for testing
# allowed_auth_domains = ["ecuad.ca", "gmail.com"]  # Broader for testing
# enable_key_vault = false  # Simpler for dev

# For staging environment:
# auth_sign_in_audience = "AzureADMyOrg"
# auth_providers = ["azure-ad"]
# allowed_auth_domains = ["ecuad.ca"]
# enable_key_vault = true

# Tags
tags = {
  Environment = "production"
  Project     = "ReportMate"
  ManagedBy   = "Terraform"
  Owner       = "your-team-name"
}
